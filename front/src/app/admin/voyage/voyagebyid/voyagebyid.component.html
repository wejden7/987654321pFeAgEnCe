
<div class="container">
  <div class="row d-flex justify-content-center">
<!--uplode meultiple images-->
    <div class="col col-md-6 m-1 shadow p-3 mb-5 bg-white rounded">
      <h6>selecte images de voyage</h6>
      <div class="modal-body">
       
        <form [formGroup]="myForm" (ngSubmit)="submit()">
          <div class="form-group">
                       <input 
                              [ngClass]="{ 'is-invalid': submitted && f.file.errors }"
                              formControlName="file"
                              id="file" 
                              type="file" 
                              class="form-control"
                              multiple="" 
                              [(ngModel)]="file"
                              (change)="onFileChange($event)"
                              accept="image/*"
                              class="custom-file-input"
                              id="validatedCustomFile" >
                              <div class="invalid-feedback">select file</div>
          <label class="custom-file-label" for="validatedCustomFile">Nauvele image...</label>
         
           </div>
          <div class="row d-flex justify-content-center">
            <button class="btn w-25 btn-primary m-1" type="submit">enregistrer</button>
            <button (click)="add()" class="btn w-25 btn-secondary m-1" type="button">Reset</button>
          </div>
           
         </form>
    
      </div>
    </div>
  </div>
</div>

<!--updete image-->
<div class="container">
  <div class="row  d-flex justify-content-center">
   
    <div *ngIf="updeteimagevalid" class="col col-md-5 shadow p-3 mb-5 bg-white rounded">
      <h6>mise ajour image de couvertire</h6>
      <form [formGroup]="registerForm" (submit)="updeteimage()">
        <div class="modal-body">
          <div class="custom-file">
            <input  [ngClass]="{ 'is-invalid': submittedupdete && f1.image.errors }" type="file"  accept="image/*" formControlName="image" name="image" (change)="fileChange($event)" [(ngModel)]='image' class="custom-file-input" id="validatedCustomFile" required>
            <label class="custom-file-label" for="validatedCustomFile">Nauvele image...</label>
            <div class="invalid-feedback">select file</div>
          </div>
        </div>
        <div class="row justify-content-center">
          <button type="submit" class="btn w-25 m-1 btn-primary float-right" > Mise Ajoure</button>
          <button (click)="add()" class="btn w-25 btn-secondary m-1" type="button">Reset</button>

        </div>
      </form>
    </div>
  </div>
</div>
<!-- afficher image de voyage -->
<div class="container mt-5">
  <div class="row justify-content-center  ">
      <div id="couvert"  class="col-md-6 ">
          <div   class="card  text-white">
            <img class="card-img w-100 " src="http://127.0.0.1:8000/images/voyage/{{name_image_of_voyage}}"  alt="">
            <div class="card-img-overlay">
              <h5  class="card-title"  style="text-align: justify;">{{voyage.titre}}</h5>
              <h5 class="card-text" style="text-align:justify;">{{voyage.nbjour}} Jours /  {{voyage.nbjour-1}} Nuits</h5>
              <!--updete image-->
              <h1 (click)="updeteimagevalid=true" class="" style="text-align:right;" data-toggle="modal" data-target="#exampleModal"><i class="fas fa-camera"></i></h1>
            </div>
          </div>
      </div>
      <div *ngIf="nbimages!=0" class="col">
        <!--images-->
              <ngb-carousel #carousel interval="7000" [pauseOnHover]="pauseOnHover" (slide)="onSlide($event)">
                <ng-template ngbSlide *ngFor="let img of images; index as i">
                    <div class="picsum-img-wrapper">
                      <img src="http://127.0.0.1:8000/images/voyage/{{img.name}}" alt="">
                    </div>
                </ng-template>
              </ngb-carousel>
      </div>
  </div>
</div>


<div class="container">
<div class="row  justify-content-center">
  <!--afichage de periode-->
  <div class="col-md-7 m-1 mt-5 shadow p-3 mb-5 bg-white rounded">
    <h1 style="text-align: center;">Les Periode De Voyage Et Le Prix</h1>
      <form [formGroup]="periodeForm"  (submit)="addperiode()">
            <div class="row mt-3 d-flex justify-content-center ">
              <div class="col-md-5">
                <div   class="input-group mb-2">
                  <div (click)="d.toggle()"class="input-group-prepend">
                    <div  class="input-group-text"> <i class="fas fa-calendar-alt"></i></div>
                </div>
                <input  [ngClass]="{ 'is-invalid': submitteperiode && this.date==''&&type=='add'}" formControlName="dp"   class="form-control"   [minDate]="minPickerDate" [placeholder]="updetedate"
                   name="dp" [(ngModel)]="model" ngbDatepicker (ngModelChange)="onDateChange($event)" #d="ngbDatepicker">
                </div>
                <div *ngIf="submitteperiode && f2.dp.errors" class="invalid-feedback">
                  <div *ngIf="f2.dp.errors.required">selecte date et obligatoir</div>
                 
              </div>
                <input [ngClass]="{ 'is-invalid': submitteperiode && f2.prix.errors }" class="form-control " formControlName="prix" [(ngModel)]="prix" name="prix" type="text" placeholder="prix">
                <div *ngIf="submitteperiode && f2.prix.errors" class="invalid-feedback">
                  <div *ngIf="f2.prix.errors.pattern">prix  et un real</div>
                  <div *ngIf="f2.prix.errors.required">prix  et obligatoir</div>
              </div>
              </div>
              <button  *ngIf='type=="add"'   type="submit" class="btn h-25 m-4 btn-primary float-right ">Enregistre</button>
                <button    *ngIf='type=="updete"'  (click)="Updeteperiod()" type="button" class="btn h-25 m-4 btn-primary float-right">Updete</button>  
      
            </div>
        </form>
    <table class="table table-bordered mt-5 ">
    <thead >
      <tr>
        <th style="text-align: center;" scope="col">Edite</th>
        <th style="text-align: center;" scope="col">Data</th>
        <th style="text-align: center;" scope="col">Prix</th>
        <th style="text-align: center;" scope="col">Supprimer</th>
      </tr>
    </thead>
    
    <tbody>
      
        <tr *ngFor="let p of periode">
          <th  style="text-align: center;" scope="row">
            <button (click)="updete(p)"  type="button" class="btn btn-primary" data-toggle="modal" data-target=".bd-example-modal-lg">
              <i class="fas fa-edit"></i>
            </button>
          </th>
          <td style="text-align: center;">{{p.date}}</td>
          <td style="text-align: center;">{{p.prix}}</td>
          <td style="text-align: center;"><h2 (click)="delete(p.id)"><span class="badge  badge-danger"><i class="fas fa-trash-alt"></i></span></h2> </td>
        </tr>
    </tbody>
  
    </table>
  
  </div>
  <div *ngIf="!termine" class="col-md-4 mt-5  shadow p-3 mb-5 bg-white rounded ">
   <!-- add programe de voyage-->
   
    <form [formGroup]="ProgrammeForm"  (submit)="addProgarmme()">
        <div class="form-group shadow-textarea">
          <label  for="exampleFormControlTextarea6"><h5>Programme Jour {{jour}}</h5> </label>
          <textarea  [ngClass]="{ 'is-invalid': submitteprogramme && f3.programme.errors }"  class="form-control z-depth-1" id="exampleFormControlTextarea6" formControlName="programme" name="programme" [(ngModel)]="programme" rows="3" placeholder="Write something here..."></textarea>
          <div *ngIf="submitteprogramme && f3.programme.errors" class="invalid-feedback">
            <div *ngIf="f3.programme.errors.required">programme  et obligatoir</div>
        </div>
        </div>
     <div class="row  d-flex justify-content-center">
      <button *ngIf="!termine && !updete_programme" type="submit" class="btn btn-primary">Enregistrer</button>
      <button (click)='updetemodifier()' *ngIf="!termine && updete_programme" type="button" class="btn btn-primary">misa jour</button>
     </div>     
    </form>
    

  <div>
  </div>
  </div>
</div>
</div>

<!--afficher programme-->
<div *ngIf="termine" class="container mb-5">
  <h4>Programme de voyage</h4>
  <div class="row">
      <div class="col-md-12">
          <div class="main-timeline11">
              <div class="timeline" *ngFor="let prog of allprogramme">
                  <a (click)="updeteprograme(prog)"  class="timeline-content">
                      <span class="year">{{prog.jour}}</span>
                      <div class="inner-content">
                          <h3 class="title">Jour  {{prog.jour}}</h3>
                          <p class="description">
                              {{prog.description}}
                          </p>
                      </div>
                  </a>
              </div>

          </div>
      </div>
  </div>
</div>
